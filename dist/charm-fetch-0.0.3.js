var CFetch=function(t){var e={};function o(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=t,o.c=e,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";var r=this&&this.__assign||Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},n=this&&this.__rest||function(t,e){var o={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(o[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&(o[r[n]]=t[r[n]])}return o},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};e.__esModule=!0;var u=i(o(1)),s=function(){function t(){}return t.getInstance=function(t){return this.instances[t]||null},t.create=function(t,e){return this.instances[t]=new a(e),this.instances[t]},t.upload=function(t,e){var o=t.url,i=void 0===o?"":o,s=t.method,a=void 0===s?"POST":s,c=n(t,["url","method"]);return new u.default(r({},c,{method:a,type:"upload",url:i,callback:e,isFetch:!1})).request()},t.download=function(t,e){var o=t.url,i=void 0===o?"":o,s=t.method,a=void 0===s?"GET":s,c=n(t,["url","method"]);return new u.default(r({},c,{url:i,method:a,type:"download",callback:e,isFetch:!1})).request()},t.querystring=function(t){return new u.default(r({},t,{method:"GET"})).querystring()},t.request=function(t){var e=t.url,o=void 0===e?"":e,i=t.method,s=void 0===i?"GET":i,a=n(t,["url","method"]);return new u.default(r({},a,{url:o,method:s,type:"request"})).request()},t.instances={},t}();e.default=s;var a=function(){function t(t){this._options=t}return t.prototype.joinUrl=function(t){return/^(https?:)?\/\//.test(t)?t:this._options.url+t},t.prototype._request=function(t){var e=this;return function(o,n){return new u.default(r({},e._options,t,{type:"request",body:o,callback:n})).request()}},t.prototype.querystring=function(t){return new u.default(r({},this._options,{method:"GET",body:t})).querystring()},t.prototype.get=function(t,e){return void 0===e&&(e={}),this._request(r({},e,{url:this.joinUrl(t),method:"get"}))},t.prototype.post=function(t,e){return void 0===e&&(e={}),this._request(r({},e,{method:"post",url:this.joinUrl(t)}))},t.prototype.delete=function(t,e){return void 0===e&&(e={}),this._request(r({},e,{method:"delete",url:this.joinUrl(t)}))},t.prototype.patch=function(t,e){return void 0===e&&(e={}),this._request(r({},e,{url:this.joinUrl(t),method:"patch"}))},t.prototype.put=function(t,e){return void 0===e&&(e={}),this._request(r({},e,{url:this.joinUrl(t),method:"put"}))},t.prototype.upload=function(t,e){return void 0===e&&(e={method:"POST"}),this._request(r({},e,{url:this.joinUrl(t),method:e.method||"POST",type:"upload",isFetch:!1}))},t.prototype.download=function(t,e){return void 0===e&&(e={method:"POST"}),this._request(r({},e,{method:e.method||"POST",type:"download",url:this.joinUrl(t),isFetch:!1}))},t.prototype.request=function(t){return this._request(r({},t,{type:"request"}))},t}()},function(t,e,o){"use strict";var r=this&&this.__assign||Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t};function n(t,e){void 0===e&&(e="");var o=[];for(var r in t)if(void 0!=t[r]){var i=""==e?r:e+"["+r+"]";if("[object Object]"==Object.prototype.toString.call(t[r]))o.push.apply(o,n(t[r],i));else if("[object Array]"==Object.prototype.toString.call(t[r]))for(var u=0,s=t[r];u<s.length;u++){var a=s[u];o.push([i+"[]",a])}else o.push([i,t[r]])}return o}function i(t){return n(t).map(function(t){return t.join("=")}).join("&")}function u(t){for(var e=n(t),o=new FormData,r=0,i=e;r<i.length;r++){var u=i[r];o.append(u[0],u[1])}return o}function s(t){return t.replace(/([^(https?:)])(\/)+/gi,"$1/").replace(/\/\??$/,"/")}e.__esModule=!0,e.params2String=i,e.params2FormData=u,e.buildUrl=s;var a=function(){function t(t){var e=t.url,o=void 0===e?"":e,r=t.method,n=t.body,a=t.headers,c=void 0===a?{}:a,l=t.onRequest,p=t.onResponse,d=t.mode,h=void 0===d?"no-cors":d,f=t.isFetch,y=void 0===f||f,m=t.type,v=t.callback,b=t.timeout;r=t.method.toUpperCase(),o=s(o);var w={};if(l&&(n=l(n||{})),c["Content-Type"]||(c["Content-Type"]="multipart/form-data"),"GET"==r){var j=i(n||{});/[&?][\w-]+=[\w-]+$/.test(o)?o+="&"+j:o+="?"+j}else if(n&&"[object Object]"===Object.prototype.toString.call(n)&&Object.keys(n).length>0)switch(c["Content-Type"]){case"multipart/form-data":w=u(n);break;case"text/xml":w=n;break;case"application/json":w=JSON.stringify(n);break;case"application/x-www-form-urlencoded":default:w=i(n)}this._options={url:encodeURI(o),method:r,headers:c,body:w,mode:h,isFetch:y,callback:v,timeout:b,type:m,onRequest:l,onResponse:p},this._options=this.objectFilter(this._options,function(t,e){return void 0!=e||null!=e})}return t.prototype.objectFilter=function(t,e){var o={};for(var r in t)e(r,t[r])&&(o[r]=t[r]);return o},t.prototype.querystring=function(){return this._options.url},t.prototype.request=function(){var t=this;return new Promise(function(e,o){try{return"fetch"in window&&t._options.isFetch?t.doFetch().then(e,o):t.doXmlHttpRequest().then(e,o)}catch(t){o(t)}})},t.prototype.doFetch=function(){var t=this;return new Promise(function(e,o){try{var n,i=t._options,u=i.url,s=void 0===u?"":u,a=i.method,c=i.body,l=i.headers,p=void 0===l?{}:l,d=i.onResponse,h=i.mode,f=void 0===h?"no-cors":h,y=(i.isFetch,i.type),m=(i.callback,i.timeout);"request"!=y&&o("fetch not suppert "+y),m&&(n=setTimeout(function(){o(new Error("fetch timeout"))},m));fetch(s,r({method:a,headers:p,mode:f},"GET"==a?{body:c}:{})).then(function(t){if(clearTimeout(n),t.status>=200&&t.status<300)return t;var e=new Error(t.statusText);throw e.response=t,e}).then(function(t){return d?d(t):t}).then(function(t){return e(t)}).catch(function(t){clearTimeout(n),o(t)})}catch(t){o(t)}})},t.prototype.doXmlHttpRequest=function(){var t=this;return new Promise(function(e,o){try{var r,n=t._options,i=n.url,u=void 0===i?"":i,s=n.method,a=n.body,c=(n.headers,n.onResponse),l=(n.mode,n.isFetch,n.type),p=n.callback,d=n.timeout;switch(r="XMLHttpRequest"in window?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),d&&(r.timeout=d),r.open(s,u,!0),l){case"upload":"[object Object]"==Object.prototype.toString.call(p)&&o("callback must object"),p.progress&&(r.upload.onprogress=function(t){p.progress(t.loaded,t.total)}),p.loadstart&&(r.upload.onloadstart=p.loadstart),p.loadend&&(r.upload.onloadend=p.loadend),p.error&&(r.upload.onerror=p.error),p.timeout&&(r.upload.ontimeout=p.timeout),p.abort&&(r.upload.onabort=p.abort),p.load&&(r.upload.onload=p.load);break;case"download":r.onprogress=function(t){p(t.loaded,t.total)},r.responseType="blob"}r.onload=function(){try{if(4!=r.readyState)return;var t={};r.getAllResponseHeaders().split("\n").forEach(function(e){var o=e.indexOf(":");-1!=o&&(t[e.substring(0,o)]=e.substr(o+1).trim())});var n=new Response(r.response,{headers:t});e(c(n))}catch(t){o(t)}},r.onerror=function(t){o(t)},r.send("GET"!=s?a:null)}catch(t){o(t)}})},t}();e.default=a}]).default;